{% extends 'website/base.html' %}
{% load static %}

{% block title %}
	Connect to provider
{% endblock %}

{% block content %}

<style type="text/css">
  
.loginWindow {
  display: none;
  position: absolute;
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
  background-color: white;
  border-style: solid;
  border-color: rgb(33,37,41);
  border-radius: 10px;
  padding: : 10px;
  }
</style>

<!--div class="d-flex justify-content-md-center align-items-center vh-100"-->
<div>
    <div class="table-responsive-xl">
        <table class="table table-striped table-hover">
            <tbody>
                <tr>
                    <th>Name</th>
                    <th>Homepage</th>
                    <th>ID </th>
                    <th> </th>
            </tr>
            {% for operator in operators %}
            <tr>
              <td>{{ operator.item_metadata.1.val }}</td>
              <td>{{ operator.item_metadata.2.val }}</td>
              <td>{{ operator.item_metadata.3.val }}</td>
                <td><input  class="btn btn-md btn-primary" type="submit" value="Connect to provider" onclick="login(this)"></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
</div>

<div class="loginWindow p-3">
  <form class="connectForm" method="POST" action="/connect/">
      {% csrf_token %}
      <p id="login-p">Connect to</p>
      <div class="form-group">
        <label>Email</label><br>
        <input class="form-control" placeholder="Email" type="text" name="username"><br>
      </div>
      <div class="form-group">
        <label>Password</label><br>
        <input class="form-control" placeholder="Password" type="password" name="password"><br>
      </div>
      <input id="o_id" type="hidden" name="id">
      <button type="submit"  class="btn btn-primary">Connect</button>
      <button onclick="closewindow()" class="btn btn-light">Close</button><br>
  </form>
</div>




<script type="text/javascript">

function login(node) {
  $("#login-p").html("Connect to");
  nodeParent = node.parentNode;
  data1_node = nodeParent.previousSibling;
  data_1 = data1_node.previousSibling.innerHTML;
  info = $(nodeParent).siblings();
  message = $("#login-p").html();
  $("#login-p").html(message + " " + info.html());
  $("#o_id").val(data_1);
  $(".loginWindow").css("display", "block");
}

function closewindow() {
  $("#login-p").html("Connect to");
  $(".loginWindow").css("display", "none");
}

</script>

{% endblock %}